{"ast":null,"code":"import _classCallCheck from \"G:\\\\Project\\\\nitraa-pune-website\\\\nitraa-pune\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"G:\\\\Project\\\\nitraa-pune-website\\\\nitraa-pune\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"G:\\\\Project\\\\nitraa-pune-website\\\\nitraa-pune\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"G:\\\\Project\\\\nitraa-pune-website\\\\nitraa-pune\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"G:\\\\Project\\\\nitraa-pune-website\\\\nitraa-pune\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"G:\\\\Project\\\\nitraa-pune-website\\\\nitraa-pune\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"G:\\\\Project\\\\nitraa-pune-website\\\\nitraa-pune\\\\client\\\\src\\\\ModeratorDashboard.jsx\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport MaterialIcons from 'material-icons-react';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Table from 'react-bootstrap/Table';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport Sweetalert from 'react-bootstrap-sweetalert';\nimport axios from 'axios';\nimport Header from './Components/Header';\nimport Footer from './Components/Footer';\nimport $ from 'jquery'; // import IMGSlider from 'react-image-slider';\n// import '../node_modules/react-image-slider/lib/image-slider.css';\n\nvar ModeratorDashboard =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ModeratorDashboard, _React$Component);\n\n  function ModeratorDashboard(props) {\n    var _this;\n\n    _classCallCheck(this, ModeratorDashboard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ModeratorDashboard).call(this, props));\n    _this.state = {\n      ModeratorAlertText: \"\",\n      ModeratorAlertShow: false,\n      ModeratorAlertStyle: \"danger\",\n      galleryImages: []\n    };\n    _this.handleModeratorAlertClose = _this.handleModeratorAlertClose.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleModeratorAlertShow = _this.handleModeratorAlertShow.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDeleteGallery = _this.handleDeleteGallery.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ModeratorDashboard, [{\n    key: \"handleModeratorAlertShow\",\n    value: function handleModeratorAlertShow() {\n      this.setState({\n        ModeratorAlertShow: true\n      });\n    }\n  }, {\n    key: \"handleModeratorAlertClose\",\n    value: function handleModeratorAlertClose() {\n      this.setState({\n        ModeratorAlertShow: false\n      });\n      $(\"#gallery-caption\").val(\"\");\n    }\n  }, {\n    key: \"handleDeleteGallery\",\n    value: function handleDeleteGallery(e) {\n      var _self = this;\n\n      var event = e;\n      console.log();\n      axios({\n        method: \"delete\",\n        url: \"/moderator-gallery\",\n        headers: {\n          authtoken: localStorage.getItem('authtoken')\n        },\n        data: {\n          dbid: $($(event.currentTarget)[0]).attr('value')\n        }\n      }).then(function (response) {\n        if (response.data.status == 'success') {\n          _self.setState({\n            ModeratorAlertText: \"Successfully Deleted\",\n            ModeratorAlertStyle: \"success\"\n          });\n\n          _self.handleModeratorAlertShow();\n\n          _self.fetchGallery();\n        } else {\n          _self.setState({\n            ModeratorAlertText: response.data.message,\n            ModeratorAlertStyle: \"danger\"\n          });\n\n          _self.handleModeratorAlertShow();\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"fetchGallery\",\n    value: function fetchGallery() {\n      var _self = this;\n\n      axios({\n        method: \"get\",\n        url: \"/moderator-gallery\",\n        headers: {\n          authtoken: localStorage.getItem('authtoken')\n        }\n      }).then(function (response) {\n        if (response.data.status === 'success') {\n          console.log(response.data.list);\n\n          if (response.data.list.length === 0) {\n            _self.setState({\n              ModeratorAlertText: \"No Gallery Images\",\n              ModeratorAlertStyle: \"danger\"\n            });\n\n            _self.handleModeratorAlertShow();\n          } else {\n            _self.setState({\n              galleryImages: response.data.list\n            });\n          }\n        } else {\n          _self.setState({\n            ModeratorAlertText: response.data.message,\n            ModeratorAlertStyle: \"danger\"\n          });\n\n          _self.handleModeratorAlertShow();\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $(\"#gallery-file\").on(\"change\", function (e) {\n        $(\"#gallery-filename\").html(e.currentTarget.files[0].name);\n      });\n      this.fetchGallery();\n\n      var _self = this;\n\n      $(\"#gallery-upload\").on(\"click\", function (e) {\n        if ($(\"#gallery-caption\").val() == '' || $(\"#gallery-file\")[0].files.length === 0) {\n          _self.setState({\n            ModeratorAlertText: \"Empty Fields are not acceptable\",\n            ModeratorAlertStyle: \"danger\"\n          });\n\n          _self.handleModeratorAlertShow();\n        } else {\n          var formdata = new FormData();\n          formdata.append(\"galleryImage\", $(\"#gallery-file\")[0].files[0]);\n          formdata.append(\"caption\", $(\"#gallery-caption\").val());\n          axios({\n            method: \"post\",\n            url: \"/moderator-gallery\",\n            headers: {\n              authtoken: localStorage.getItem('authtoken'),\n              'Content-Type': 'multipart/form-data'\n            },\n            data: formdata\n          }).then(function (response) {\n            if (response.data.status === \"success\") {\n              _self.setState({\n                ModeratorAlertText: \"Successfully Uploaded\",\n                ModeratorAlertStyle: \"success\"\n              });\n\n              _self.handleModeratorAlertShow();\n\n              _self.fetchGallery();\n            } else {\n              _self.setState({\n                ModeratorAlertText: response.data.message,\n                ModeratorAlertStyle: \"danger\"\n              });\n\n              _self.handleModeratorAlertShow();\n            }\n          }).catch(function (error) {\n            console.log(error);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var styleTableDiv = {\n        marginTop: '15vh',\n        marginBottom: '15vh',\n        background: \"#eeeeee\"\n      };\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: styleTableDiv,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Tabs, {\n        defaultActiveKey: \"gallery\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        eventKey: \"gallery\",\n        title: \"GALLERY\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          padding: \"2vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"file\",\n        id: \"gallery-file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        id: \"gallery-filename\",\n        style: {\n          border: \"solid 1px blue\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 7,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"text\",\n        id: \"gallery-caption\",\n        placeholder: \"Caption\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        id: \"gallery-upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Upload\")))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          overflowX: \"auto\",\n          overflowY: \"hidden\",\n          display: \"inline-block\",\n          whiteSpace: \"nowrap\",\n          width: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, this.state.galleryImages.map(function (d, i) {\n        return React.createElement(React.Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            display: \"inline-block\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, React.createElement(Button, {\n          value: d._id,\n          variant: \"outline-warning\",\n          onClick: _this2.handleDeleteGallery,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, \"Delete\"), React.createElement(\"img\", {\n          src: process.env.PUBLIC_URL + 'images/gallery/' + d._id + '.' + d.EXT,\n          height: \"100vw\",\n          width: \"100vw\",\n          style: {\n            marginRight: \"15px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        })));\n      })))))), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), React.createElement(Sweetalert, {\n        type: this.state.ModeratorAlertStyle,\n        confirmBtnText: \"I Understand\",\n        confirmBtnBsStyle: \"primary\",\n        title: \"Moderator Utility\",\n        show: this.state.ModeratorAlertShow,\n        onConfirm: this.handleModeratorAlertClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, this.state.ModeratorAlertText));\n    }\n  }]);\n\n  return ModeratorDashboard;\n}(React.Component);\n\nexport default ModeratorDashboard;","map":{"version":3,"sources":["G:\\Project\\nitraa-pune-website\\nitraa-pune\\client\\src\\ModeratorDashboard.jsx"],"names":["React","ReactDOM","Container","Form","Button","MaterialIcons","Row","Col","Table","Tabs","Tab","Sweetalert","axios","Header","Footer","$","ModeratorDashboard","props","state","ModeratorAlertText","ModeratorAlertShow","ModeratorAlertStyle","galleryImages","handleModeratorAlertClose","bind","handleModeratorAlertShow","handleDeleteGallery","setState","val","e","_self","event","console","log","method","url","headers","authtoken","localStorage","getItem","data","dbid","currentTarget","attr","then","response","status","fetchGallery","message","catch","error","list","length","err","on","html","files","name","formdata","FormData","append","styleTableDiv","marginTop","marginBottom","background","padding","border","overflowX","overflowY","display","whiteSpace","width","map","d","i","_id","process","env","PUBLIC_URL","EXT","marginRight","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport MaterialIcons from 'material-icons-react';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Table from 'react-bootstrap/Table';\r\nimport Tabs from 'react-bootstrap/Tabs';\r\nimport Tab from 'react-bootstrap/Tab'\r\nimport Sweetalert from 'react-bootstrap-sweetalert';\r\nimport axios from 'axios';\r\nimport Header from './Components/Header';\r\nimport Footer from './Components/Footer';\r\nimport $ from 'jquery';\r\n// import IMGSlider from 'react-image-slider';\r\n// import '../node_modules/react-image-slider/lib/image-slider.css';\r\n\r\nclass ModeratorDashboard extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            ModeratorAlertText : \"\",\r\n            ModeratorAlertShow : false,\r\n            ModeratorAlertStyle : \"danger\",\r\n            galleryImages : []\r\n        }\r\n\r\n        this.handleModeratorAlertClose = this.handleModeratorAlertClose.bind(this);\r\n        this.handleModeratorAlertShow = this.handleModeratorAlertShow.bind(this);\r\n        this.handleDeleteGallery = this.handleDeleteGallery.bind(this);\r\n    }\r\n\r\n    handleModeratorAlertShow() {\r\n        this.setState({ ModeratorAlertShow: true });\r\n    }\r\n\r\n    handleModeratorAlertClose() {\r\n        this.setState({ ModeratorAlertShow: false });\r\n        $(\"#gallery-caption\").val(\"\");\r\n    }\r\n\r\n    handleDeleteGallery(e){\r\n        var _self = this;\r\n        var event = e;\r\n        console.log();\r\n        axios({\r\n            method : \"delete\",\r\n            url : \"/moderator-gallery\",\r\n            headers : {\r\n                authtoken:localStorage.getItem('authtoken')\r\n            },\r\n            data : {\r\n                dbid : $($(event.currentTarget)[0]).attr('value')\r\n            }\r\n        })\r\n        .then(function(response){\r\n            if(response.data.status == 'success'){\r\n                _self.setState({ModeratorAlertText : \"Successfully Deleted\", ModeratorAlertStyle : \"success\"});\r\n                _self.handleModeratorAlertShow();\r\n                _self.fetchGallery();\r\n            }\r\n            else{\r\n                _self.setState({ModeratorAlertText : response.data.message, ModeratorAlertStyle : \"danger\"});\r\n                _self.handleModeratorAlertShow();\r\n            }\r\n        })\r\n        .catch(function(error){\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    fetchGallery(){\r\n        var _self = this;\r\n        axios({\r\n            method : \"get\",\r\n            url : \"/moderator-gallery\",\r\n            headers : {\r\n                authtoken:localStorage.getItem('authtoken')\r\n            }\r\n        })\r\n        .then(function(response){\r\n            if(response.data.status === 'success'){\r\n                console.log(response.data.list);\r\n                if(response.data.list.length === 0){\r\n                    _self.setState({ModeratorAlertText : \"No Gallery Images\", ModeratorAlertStyle : \"danger\"});\r\n                    _self.handleModeratorAlertShow();\r\n                }\r\n                else{\r\n                    _self.setState({galleryImages : response.data.list});\r\n                }\r\n            }\r\n            else{\r\n                _self.setState({ModeratorAlertText : response.data.message, ModeratorAlertStyle : \"danger\"});\r\n                _self.handleModeratorAlertShow();\r\n            }\r\n        })\r\n        .catch(function(err){\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    componentDidMount(){\r\n        $(\"#gallery-file\").on(\"change\", function(e){\r\n            $(\"#gallery-filename\").html(e.currentTarget.files[0].name)\r\n        })\r\n\r\n        this.fetchGallery();\r\n\r\n        var _self = this;\r\n\r\n        $(\"#gallery-upload\").on(\"click\", function(e){\r\n            if($(\"#gallery-caption\").val() == '' || $(\"#gallery-file\")[0].files.length === 0){\r\n                _self.setState({ModeratorAlertText : \"Empty Fields are not acceptable\", ModeratorAlertStyle : \"danger\"});\r\n                _self.handleModeratorAlertShow();\r\n            }\r\n            else{\r\n                const formdata = new FormData()\r\n                formdata.append(\"galleryImage\", $(\"#gallery-file\")[0].files[0])\r\n                formdata.append(\"caption\", $(\"#gallery-caption\").val())\r\n                axios({\r\n                    method : \"post\",\r\n                    url : \"/moderator-gallery\",\r\n                    headers : {\r\n                        authtoken:localStorage.getItem('authtoken'),\r\n                        'Content-Type': 'multipart/form-data'\r\n                    },\r\n                    data : formdata\r\n                })\r\n                .then(function(response){\r\n                    if(response.data.status === \"success\"){\r\n                        _self.setState({ModeratorAlertText : \"Successfully Uploaded\", ModeratorAlertStyle : \"success\"});\r\n                        _self.handleModeratorAlertShow();\r\n                        _self.fetchGallery();\r\n                    }\r\n                    else{\r\n                        _self.setState({ModeratorAlertText : response.data.message, ModeratorAlertStyle : \"danger\"});\r\n                        _self.handleModeratorAlertShow();\r\n                    }\r\n                })\r\n                .catch(function(error){\r\n                    console.log(error);\r\n                })\r\n            }\r\n        })\r\n    }    \r\n\r\n    render(){\r\n    \r\n        const styleTableDiv = {\r\n            marginTop : '15vh',\r\n            marginBottom : '15vh',\r\n            background : \"#eeeeee\"\r\n\r\n        }\r\n\r\n        return(\r\n            <Container>\r\n                <Header/>\r\n                    <div style={styleTableDiv}>\r\n                        <Tabs defaultActiveKey=\"gallery\">\r\n                            <Tab eventKey=\"gallery\" title=\"GALLERY\">\r\n                                <div style={{padding:\"2vw\"}}>\r\n                                    <Form>\r\n                                        <Row>\r\n                                            <Col md={2}>\r\n                                                <Form.Control type=\"file\" id=\"gallery-file\"></Form.Control>\r\n                                            </Col>\r\n                                            <Col  md={2}>\r\n                                                <Form.Label id=\"gallery-filename\" style={{border:\"solid 1px blue\"}}></Form.Label>\r\n                                            </Col>\r\n                                            <Col md={7}>\r\n                                                <Form.Control type=\"text\" id=\"gallery-caption\" placeholder=\"Caption\" required></Form.Control>\r\n                                            </Col>\r\n                                            <Col  md={1}>\r\n                                                <Button variant=\"primary\" id=\"gallery-upload\">\r\n                                                    Upload\r\n                                                </Button>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Form>\r\n                                    <hr/>\r\n                                    <div style={{overflowX:\"auto\", overflowY:\"hidden\", display:\"inline-block\", whiteSpace:\"nowrap\", width:\"100%\"}}>\r\n                                        {this.state.galleryImages.map((d,i) => {\r\n                                            return (\r\n                                                <React.Fragment>\r\n                                                    <div style={{display:\"inline-block\"}}>\r\n                                                    <Button value={d._id} variant=\"outline-warning\" onClick={this.handleDeleteGallery}>Delete</Button>\r\n                                                    <img src={process.env.PUBLIC_URL + 'images/gallery/'+d._id + '.' + d.EXT} height=\"100vw\" width=\"100vw\" style={{marginRight:\"15px\"}}/>\r\n                                                    </div>\r\n                                                {/* <p><b>X</b></p> */}\r\n                                                </React.Fragment>\r\n                                            )\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            </Tab>\r\n                            {/* If Something new comes up for Moderator- Carousel to be done by the Developer */}\r\n                        </Tabs>\r\n                    </div>\r\n                <Footer/>\r\n                <Sweetalert type={this.state.ModeratorAlertStyle} confirmBtnText=\"I Understand\" confirmBtnBsStyle=\"primary\" title=\"Moderator Utility\" show={this.state.ModeratorAlertShow} onConfirm={this.handleModeratorAlertClose}>\r\n                    {this.state.ModeratorAlertText}\r\n                </Sweetalert>\r\n            </Container>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nexport default ModeratorDashboard;"]},"metadata":{},"sourceType":"module"}